import streamlit as st
from datetime import datetime, date
import random

# ë¶„ì•¼ë³„ ìš´ì„¸ ë©”ì‹œì§€ ì‚¬ì „
fortunes_by_category = {
    "ì „ì²´ ìš´ì„¸ ğŸ”®": [
        "ì˜¤ëŠ˜ì€ í–‰ìš´ì˜ ê¸°ìš´ì´ ê°€ë“í•´ìš”. ì‘ì€ ë„ì „ì„ í•´ë³´ì„¸ìš”!",
        "ëœ»ë°–ì˜ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ìˆ˜ ìˆì–´ìš”!",
        "ë§ˆìŒì˜ ì—¬ìœ ë¥¼ ê°€ì§€ë©´ ì¢‹ì€ ì¼ì´ ìƒê²¨ìš”.",
        "ê°ì‚¬í•˜ëŠ” ë§ˆìŒì´ í–‰ìš´ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.",
    ],
    "ì—°ì•  ìš´ì„¸ ğŸ’˜": [
        "ì˜¤ëŠ˜ì€ ì‚¬ë‘ì´ ê°€ê¹Œì´ì— ìˆì–´ìš”. ëˆˆì„ í¬ê²Œ ë– ë³´ì„¸ìš”!",
        "ì˜¤ë˜ëœ ì¸ì—°ì´ ë‹¤ì‹œ ì´ì–´ì§ˆ ìˆ˜ ìˆëŠ” ë‚ ì´ì—ìš”.",
        "ì†”ì§í•œ í‘œí˜„ì´ ìƒëŒ€ì—ê²Œ í° ê°ë™ì„ ì¤„ ìˆ˜ ìˆì–´ìš”.",
        "ê°€ë²¼ìš´ ëŒ€í™”ì—ì„œ ì§„ì‹¬ì´ ì˜¤ê°ˆ ìˆ˜ ìˆì–´ìš”.",
    ],
    "ê¸ˆì „ ìš´ì„¸ ğŸ’°": [
        "ì‘ì€ ì§€ì¶œì„ ì•„ë¼ë©´ í° ê¸°ì¨ì´ ëŒì•„ì˜µë‹ˆë‹¤.",
        "íˆ¬ìë³´ë‹¤ ì €ì¶•ì— ë” ì§‘ì¤‘í•´ì•¼ í•˜ëŠ” ë‚ ì´ì—ìš”.",
        "ê¸°ëŒ€í•˜ì§€ ì•Šì•˜ë˜ ìˆ˜ì…ì´ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”.",
        "ê¸ˆì „ ë¬¸ì œì—ì„  ì‹ ì¤‘í•œ íŒë‹¨ì´ ì¤‘ìš”í•´ìš”.",
    ],
    "ê±´ê°• ìš´ì„¸ ğŸ’ª": [
        "ê°€ë²¼ìš´ ìš´ë™ì´ ê¸°ë¶„ ì „í™˜ì— ë„ì›€ì´ ë¼ìš”.",
        "ëª¸ì˜ ì‘ì€ ì‹ í˜¸ì— ê·€ë¥¼ ê¸°ìš¸ì´ì„¸ìš”.",
        "ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ ì»¨ë””ì…˜ì„ íšŒë³µí•´ ë³´ì„¸ìš”.",
        "ì ì„ ì¶©ë¶„íˆ ìë©´ ì¢‹ì€ í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš”.",
    ],
    "ì¼/í•™ì—… ìš´ì„¸ ğŸ“š": [
        "ì‘ì€ ì„±ì·¨ê°€ í° ë™ê¸°ë¥¼ ì¤„ ìˆ˜ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤.",
        "ì§‘ì¤‘ì´ ì˜ ë˜ëŠ” ë‚ ì´ì—ìš”. ê³µë¶€ë‚˜ ì¼ì— ëª°ì…í•´ ë³´ì„¸ìš”.",
        "ìƒˆë¡œìš´ ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥¼ ìˆ˜ ìˆì–´ìš”.",
        "ê³„íší•œ ì¼ì •ì„ ì§€í‚¤ëŠ” ê²ƒì´ í¬ì¸íŠ¸ì…ë‹ˆë‹¤.",
    ],
    "ì¸ê°„ê´€ê³„ ìš´ì„¸ ğŸ§‘â€ğŸ¤â€ğŸ§‘": [
        "ì¹œêµ¬ì™€ì˜ ëŒ€í™”ì—ì„œ íë§ì„ ì–»ì„ ìˆ˜ ìˆì–´ìš”.",
        "ê°ˆë“±ë³´ë‹¤ ì´í•´ì— ì§‘ì¤‘í•˜ë©´ ê´€ê³„ê°€ ì¢‹ì•„ì§‘ë‹ˆë‹¤.",
        "ëˆ„êµ°ê°€ì˜ ì¡°ì–¸ì´ í° ë„ì›€ì´ ë  ê±°ì˜ˆìš”.",
        "ì˜¤ëŠ˜ì€ ì¸ë§¥ í™•ì¥ì— ì¢‹ì€ ê¸°íšŒê°€ ìˆìŠµë‹ˆë‹¤.",
    ]
}

# ë  ëª©ë¡
zodiacs = [
    "ğŸ­ ì¥", "ğŸ® ì†Œ", "ğŸ¯ í˜¸ë‘ì´", "ğŸ° í† ë¼", "ğŸ² ìš©", "ğŸ ë±€",
    "ğŸ´ ë§", "ğŸ‘ ì–‘", "ğŸµ ì›ìˆ­ì´", "ğŸ” ë‹­", "ğŸ¶ ê°œ", "ğŸ· ë¼ì§€"
]

# ë³„ìë¦¬ ê³„ì‚° í•¨ìˆ˜
def get_constellation(month, day):
    signs = [
        ((1, 20), "â™’ ë¬¼ë³‘ìë¦¬"), ((2, 19), "â™“ ë¬¼ê³ ê¸°ìë¦¬"), ((3, 21), "â™ˆ ì–‘ìë¦¬"),
        ((4, 20), "â™‰ í™©ì†Œìë¦¬"), ((5, 21), "â™Š ìŒë‘¥ì´ìë¦¬"), ((6, 22), "â™‹ ê²Œìë¦¬"),
        ((7, 23), "â™Œ ì‚¬ììë¦¬"), ((8, 23), "â™ ì²˜ë…€ìë¦¬"), ((9, 23), "â™ ì²œì¹­ìë¦¬"),
        ((10, 24), "â™ ì „ê°ˆìë¦¬"), ((11, 23), "â™ ì‚¬ìˆ˜ìë¦¬"), ((12, 25), "â™‘ ì—¼ì†Œìë¦¬")
    ]
    for (start_month, start_day), sign in reversed(signs):
        if (month, day) >= (start_month, start_day):
            return sign
    return "â™‘ ì—¼ì†Œìë¦¬"

# --- ì•± ì‹œì‘ ---
st.title("ğŸ”® ë¶„ì•¼ë³„ ìš´ì„¸ ë³´ê¸°")

# ìƒë…„ì›”ì¼ ì…ë ¥
birth_date = st.date_input(
    "ë‹¹ì‹ ì˜ ìƒë…„ì›”ì¼ì„ ì„ íƒí•˜ì„¸ìš”",
    min_value=date(1900, 1, 1),
    max_value=date.today()
)

# ë ì™€ ë³„ìë¦¬ ê³„ì‚°
year, month, day = birth_date.year, birth_date.month, birth_date.day
zodiac_index = (year - 2020) % 12
zodiac = zodiacs[zodiac_index]
constellation = get_constellation(month, day)

# ë¶„ì•¼ ì„ íƒ
category = st.selectbox("ë³´ê³  ì‹¶ì€ ìš´ì„¸ ë¶„ì•¼ë¥¼ ì„ íƒí•˜ì„¸ìš” ğŸ‘‡", list(fortunes_by_category.keys()))

# ìš´ì„¸ ì„ íƒ (seed ê³ ì •)
random.seed(f"{birth_date}-{date.today().isoformat()}-{category}")
fortune = random.choice(fortunes_by_category[category])

# ê²°ê³¼ ì¶œë ¥
st.markdown(f"### ğŸ‘¤ ìƒë…„ì›”ì¼: `{birth_date}`")
st.markdown(f"**ë **: {zodiac}")
st.markdown(f"**ë³„ìë¦¬**: {constellation}")
st.markdown(f"### ğŸ“Œ {category} ìš´ì„¸")
st.success(fortune)

