import streamlit as st
from datetime import datetime, date
import random

# ë¶„ì•¼ë³„ ë°ì´í„°
fortune_data = {
    "ì „ì²´ ìš´ì„¸ ğŸ”®": {
        "messages": [
            "ì˜¤ëŠ˜ì€ í–‰ìš´ì˜ ê¸°ìš´ì´ ê°€ë“í•´ìš”. ì‘ì€ ë„ì „ì„ í•´ë³´ì„¸ìš”!",
            "ëœ»ë°–ì˜ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ìˆ˜ ìˆì–´ìš”!",
            "ë§ˆìŒì˜ ì—¬ìœ ë¥¼ ê°€ì§€ë©´ ì¢‹ì€ ì¼ì´ ìƒê²¨ìš”.",
            "ê°ì‚¬í•˜ëŠ” ë§ˆìŒì´ í–‰ìš´ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.",
        ],
        "colors": ["íŒŒë‘", "í•˜ëŠ˜ìƒ‰", "í°ìƒ‰"],
        "numbers": list(range(1, 10)),
        "items": {
            "ì°¨/ìŒë£Œ": ["ë…¹ì°¨", "ì•„ë©”ë¦¬ì¹´ë…¸", "ìºëª¨ë§ˆì¼", "ìœ ìì°¨"],
            "ìŒì•…": ["ë¡œíŒŒì´ ì¬ì¦ˆ", "í´ë˜ì‹ í”¼ì•„ë…¸", "ì”ì”í•œ ë°œë¼ë“œ"],
            "ì•„ì´í…œ": ["ì±…", "ì•„ë¡œë§ˆ ìº”ë“¤", "ì´ì–´í°"],
            "ì¥ì†Œ": ["ê³µì› ë²¤ì¹˜", "ê°•ê°€ ì‚°ì±…ë¡œ", "ì¡°ìš©í•œ ì¹´í˜"]
        }
    },
    "ì—°ì•  ìš´ì„¸ ğŸ’˜": {
        "messages": [
            "ì˜¤ëŠ˜ì€ ì‚¬ë‘ì´ ê°€ê¹Œì´ì— ìˆì–´ìš”. ëˆˆì„ í¬ê²Œ ë– ë³´ì„¸ìš”!",
            "ì˜¤ë˜ëœ ì¸ì—°ì´ ë‹¤ì‹œ ì´ì–´ì§ˆ ìˆ˜ ìˆëŠ” ë‚ ì´ì—ìš”.",
            "ì†”ì§í•œ í‘œí˜„ì´ ìƒëŒ€ì—ê²Œ í° ê°ë™ì„ ì¤„ ìˆ˜ ìˆì–´ìš”.",
            "ê°€ë²¼ìš´ ëŒ€í™”ì—ì„œ ì§„ì‹¬ì´ ì˜¤ê°ˆ ìˆ˜ ìˆì–´ìš”.",
        ],
        "colors": ["ë¶„í™", "ë¹¨ê°•", "ë³´ë¼"],
        "numbers": [2, 6, 14, 22],
        "items": {
            "ì°¨/ìŒë£Œ": ["ë”¸ê¸° ë¼ë–¼", "ë¡œì¦ˆí‹°", "ë°€í¬í‹°", "í•‘í¬ ì—ì´ë“œ"],
            "ìŒì•…": ["ë‹¬ì½¤í•œ R&B", "ëŸ¬ë¸Œì†¡", "ë¡œë§¨í‹± ì¬ì¦ˆ"],
            "ì•„ì´í…œ": ["í–¥ìˆ˜", "ë¦½ë°¤", "ì‚¬ì§„ì²©"],
            "ì¥ì†Œ": ["ì „ë§ ì¢‹ì€ ì¹´í˜", "ë†€ì´ê³µì›", "ì‚°ì±…ê¸¸"]
        }
    },
    "ê¸ˆì „ ìš´ì„¸ ğŸ’°": {
        "messages": [
            "ì‘ì€ ì§€ì¶œì„ ì•„ë¼ë©´ í° ê¸°ì¨ì´ ëŒì•„ì˜µë‹ˆë‹¤.",
            "íˆ¬ìë³´ë‹¤ ì €ì¶•ì— ë” ì§‘ì¤‘í•´ì•¼ í•˜ëŠ” ë‚ ì´ì—ìš”.",
            "ê¸°ëŒ€í•˜ì§€ ì•Šì•˜ë˜ ìˆ˜ì…ì´ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”.",
            "ê¸ˆì „ ë¬¸ì œì—ì„  ì‹ ì¤‘í•œ íŒë‹¨ì´ ì¤‘ìš”í•´ìš”.",
        ],
        "colors": ["ì´ˆë¡", "í™©ê¸ˆ", "ê°ˆìƒ‰"],
        "numbers": [4, 8, 18, 28],
        "items": {
            "ì°¨/ìŒë£Œ": ["ë³´ë¦¬ì°¨", "ë‘ìœ ", "ë¸”ë™ ì»¤í”¼", "ë¯¸ìˆ«ê°€ë£¨"],
            "ìŒì•…": ["ì§‘ì¤‘ì— ì¢‹ì€ í´ë˜ì‹", "ì¡°ìš©í•œ ê¸°íƒ€ê³¡"],
            "ì•„ì´í…œ": ["ì§€ê°‘", "ì €ê¸ˆí†µ", "ê°€ê³„ë¶€ ì•±"],
            "ì¥ì†Œ": ["ì„œì ", "ì€í–‰ ê·¼ì²˜ ì¹´í˜", "ì¬í…Œí¬ ì„¸ë¯¸ë‚˜"]
        }
    },
    "ê±´ê°• ìš´ì„¸ ğŸ’ª": {
        "messages": [
            "ê°€ë²¼ìš´ ìš´ë™ì´ ê¸°ë¶„ ì „í™˜ì— ë„ì›€ì´ ë¼ìš”.",
            "ëª¸ì˜ ì‘ì€ ì‹ í˜¸ì— ê·€ë¥¼ ê¸°ìš¸ì´ì„¸ìš”.",
            "ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ ì»¨ë””ì…˜ì„ íšŒë³µí•´ ë³´ì„¸ìš”.",
            "ì ì„ ì¶©ë¶„íˆ ìë©´ ì¢‹ì€ í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš”.",
        ],
        "colors": ["í°ìƒ‰", "íšŒìƒ‰", "ë¯¼íŠ¸"],
        "numbers": [1, 5, 10, 21],
        "items": {
            "ì°¨/ìŒë£Œ": ["ìƒê°•ì°¨", "ë ˆëª¬ì›Œí„°", "í—ˆë¸Œí‹°", "ë””ì¹´í˜ì¸ ë…¹ì°¨"],
            "ìŒì•…": ["ëª…ìƒ ìŒì•…", "ìì—°ì˜ ì†Œë¦¬", "íë§ í”¼ì•„ë…¸"],
            "ì•„ì´í…œ": ["ë¬¼ë³‘", "ìŠ¤íŠ¸ë ˆì¹­ ë°´ë“œ", "ìš”ê°€ ë§¤íŠ¸"],
            "ì¥ì†Œ": ["í—¬ìŠ¤ì¥", "ì‚°ì±…ë¡œ", "ì‚¬ìš°ë‚˜"]
        }
    },
    "ì¼/í•™ì—… ìš´ì„¸ ğŸ“š": {
        "messages": [
            "ì‘ì€ ì„±ì·¨ê°€ í° ë™ê¸°ë¥¼ ì¤„ ìˆ˜ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤.",
            "ì§‘ì¤‘ì´ ì˜ ë˜ëŠ” ë‚ ì´ì—ìš”. ê³µë¶€ë‚˜ ì¼ì— ëª°ì…í•´ ë³´ì„¸ìš”.",
            "ìƒˆë¡œìš´ ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥¼ ìˆ˜ ìˆì–´ìš”.",
            "ê³„íší•œ ì¼ì •ì„ ì§€í‚¤ëŠ” ê²ƒì´ í¬ì¸íŠ¸ì…ë‹ˆë‹¤.",
        ],
        "colors": ["íŒŒë‘", "ê²€ì •", "ë‚¨ìƒ‰"],
        "numbers": [3, 9, 12, 24],
        "items": {
            "ì°¨/ìŒë£Œ": ["ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸", "ì½œë“œë¸Œë£¨", "ì²­ê·¤ì°¨"],
            "ìŒì•…": ["ì§‘ì¤‘ë ¥ í–¥ìƒ ìŒì•…", "ëª¨ì°¨ë¥´íŠ¸", "ë¡œíŒŒì´"],
            "ì•„ì´í…œ": ["íƒ€ì´ë¨¸", "í˜•ê´‘íœ", "ë…¸íŠ¸"],
            "ì¥ì†Œ": ["ë„ì„œê´€", "ìŠ¤í„°ë””ì¹´í˜", "ì§‘ ì±…ìƒ"]
        }
    },
    "ì¸ê°„ê´€ê³„ ìš´ì„¸ ğŸ§‘â€ğŸ¤â€ğŸ§‘": {
        "messages": [
            "ì¹œêµ¬ì™€ì˜ ëŒ€í™”ì—ì„œ íë§ì„ ì–»ì„ ìˆ˜ ìˆì–´ìš”.",
            "ê°ˆë“±ë³´ë‹¤ ì´í•´ì— ì§‘ì¤‘í•˜ë©´ ê´€ê³„ê°€ ì¢‹ì•„ì§‘ë‹ˆë‹¤.",
            "ëˆ„êµ°ê°€ì˜ ì¡°ì–¸ì´ í° ë„ì›€ì´ ë  ê±°ì˜ˆìš”.",
            "ì˜¤ëŠ˜ì€ ì¸ë§¥ í™•ì¥ì— ì¢‹ì€ ê¸°íšŒê°€ ìˆìŠµë‹ˆë‹¤.",
        ],
        "colors": ["ë…¸ë‘", "ì£¼í™©", "ë² ì´ì§€"],
        "numbers": [7, 11, 17, 25],
        "items": {
            "ì°¨/ìŒë£Œ": ["ë²„ë¸”í‹°", "ë§ê³  ìŠ¤ë¬´ë””", "ìëª½ì—ì´ë“œ"],
            "ìŒì•…": ["ë°ì€ íŒ", "K-POP", "ì¹œêµ¬ì™€ ê³µìœ í•œ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸"],
            "ì•„ì´í…œ": ["íœ´ëŒ€í°", "ì‚¬ì§„ì²©", "ì„ ë¬¼ í¬ì¥ì§€"],
            "ì¥ì†Œ": ["ëª¨ì„ ì¥ì†Œ", "ì¹´í˜", "ì˜í™”ê´€"]
        }
    }
}

zodiacs = [
    "ğŸ­ ì¥", "ğŸ® ì†Œ", "ğŸ¯ í˜¸ë‘ì´", "ğŸ° í† ë¼", "ğŸ² ìš©", "ğŸ ë±€",
    "ğŸ´ ë§", "ğŸ‘ ì–‘", "ğŸµ ì›ìˆ­ì´", "ğŸ” ë‹­", "ğŸ¶ ê°œ", "ğŸ· ë¼ì§€"
]

def get_constellation(month, day):
    signs = [
        ((1, 20), "â™’ ë¬¼ë³‘ìë¦¬"), ((2, 19), "â™“ ë¬¼ê³ ê¸°ìë¦¬"), ((3, 21), "â™ˆ ì–‘ìë¦¬"),
        ((4, 20), "â™‰ í™©ì†Œìë¦¬"), ((5, 21), "â™Š ìŒë‘¥ì´ìë¦¬"), ((6, 22), "â™‹ ê²Œìë¦¬"),
        ((7, 23), "â™Œ ì‚¬ììë¦¬"), ((8, 23), "â™ ì²˜ë…€ìë¦¬"), ((9, 23), "â™ ì²œì¹­ìë¦¬"),
        ((10, 24), "â™ ì „ê°ˆìë¦¬"), ((11, 23), "â™ ì‚¬ìˆ˜ìë¦¬"), ((12, 25), "â™‘ ì—¼ì†Œìë¦¬")
    ]
    for (start_month, start_day), sign in reversed(signs):
        if (month, day) >= (start_month, start_day):
            return sign
    return "â™‘ ì—¼ì†Œìë¦¬"

# ì•± ì‹œì‘
st.title("ğŸ”® ì˜¤ëŠ˜ì˜ ìš´ì„¸")

birth_date = st.date_input("ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”", min_value=date(1900, 1, 1), max_value=date.today())

year, month, day = birth_date.year, birth_date.month, birth_date.day
zodiac_index = (year - 2020) % 12
zodiac = zodiacs[zodiac_index]
constellation = get_constellation(month, day)

category = st.selectbox("ìš´ì„¸ ë¶„ì•¼ë¥¼ ì„ íƒí•˜ì„¸ìš” ğŸ‘‡", list(fortune_data.keys()))
data = fortune_data[category]
random.seed(f"{birth_date}-{date.today().isoformat()}-{category}")

fortune = random.choice(data["messages"])
color = random.choice(data["colors"])
number = random.choice(data["numbers"])
drink = random.choice(data["items"]["ì°¨/ìŒë£Œ"])
music = random.choice(data["items"]["ìŒì•…"])
item = random.choice(data["items"]["ì•„ì´í…œ"])
place = random.choice(data["items"]["ì¥ì†Œ"])

# ê²°ê³¼ ì¶œë ¥
st.markdown(f"### ğŸ‘¤ ìƒë…„ì›”ì¼: `{birth_date}`")
st.markdown(f"**ë **: {zodiac}")
st.markdown(f"**ë³„ìë¦¬**: {constellation}")

st.markdown(f"### ğŸ“Œ {category}")
st.success(fortune)
st.markdown("---")
st.markdown(f"ğŸ¨ **ì˜¤ëŠ˜ì˜ í–‰ìš´ ìƒ‰ìƒ:** `{color}`")
st.markdown(f"ğŸ”¢ **í–‰ìš´ì˜ ìˆ«ì:** `{number}`")

st.markdown("### ğŸ ì¶”ì²œ ì•„ì´í…œ")
st.markdown(f"ğŸ¹ ì°¨/ìŒë£Œ: **{drink}**")
st.markdown(f"ğŸµ ìŒì•…: **{music}**")
st.markdown(f"ğŸ’ ì•„ì´í…œ: **{item}**")
st.markdown(f"ğŸ“ ì¥ì†Œ: **{place}**")

